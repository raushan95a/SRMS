<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Student - SRMS</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üìö Student Record Management System</h1>
            <p class="subtitle">Search Student</p>
        </header>

        <nav class="navigation">
            <a href="index.html" class="nav-link">Home</a>
            <a href="add-student.html" class="nav-link">Add Student</a>
            <a href="view-students.html" class="nav-link">View Students</a>
            <a href="search-student.html" class="nav-link active">Search Student</a>
            <a href="analytics.html" class="nav-link">Analytics</a>
        </nav>

        <main class="main-content">
            <div class="search-container">
                <h2>Find a Student</h2>
                <p class="form-description">Search for a student by their ID number.</p>

                <form id="searchForm" class="search-form">
                    <div class="form-group">
                        <label for="searchId">Student ID</label>
                        <input type="number" id="searchId" name="searchId" required placeholder="Enter student ID">
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">üîç Search</button>
                        <button type="reset" class="btn btn-secondary" onclick="clearResults()">Clear</button>
                    </div>
                </form>

                <div id="loadingMessage" class="loading" style="display: none;">Searching...</div>
                <div id="errorMessage" class="message error" style="display: none;"></div>

                <div id="searchResults" class="search-results" style="display: none;">
                    <h3>Student Details</h3>
                    <div class="student-details">
                        <div class="detail-row">
                            <span class="detail-label">Student ID:</span>
                            <span class="detail-value" id="resultId"></span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Name:</span>
                            <span class="detail-value" id="resultName"></span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Age:</span>
                            <span class="detail-value" id="resultAge"></span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Course:</span>
                            <span class="detail-value" id="resultCourse"></span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Email:</span>
                            <span class="detail-value" id="resultEmail"></span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">GPA:</span>
                            <span class="detail-value" id="resultGpa"></span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Marks:</span>
                            <span class="detail-value" id="resultMarks"></span>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>&copy; 2025 Student Record Management System. All rights reserved.</p>
        </footer>
    </div>

    <script src="js/app.js"></script>
    <script>
        document.getElementById('searchForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const searchId = parseInt(document.getElementById('searchId').value);
            const loadingMsg = document.getElementById('loadingMessage');
            const errorMsg = document.getElementById('errorMessage');
            const resultsDiv = document.getElementById('searchResults');

            loadingMsg.style.display = 'block';
            errorMsg.style.display = 'none';
            resultsDiv.style.display = 'none';

            try {
                const student = await searchStudent(searchId);
                
                loadingMsg.style.display = 'none';
                resultsDiv.style.display = 'block';

                document.getElementById('resultId').textContent = student.id;
                document.getElementById('resultName').textContent = student.name;
                document.getElementById('resultAge').textContent = student.age;
                document.getElementById('resultCourse').textContent = student.course;
                document.getElementById('resultEmail').textContent = student.email;
                document.getElementById('resultGpa').textContent = student.gpa.toFixed(2);
                document.getElementById('resultMarks').textContent = student.marks || 0;
            } catch (error) {
                loadingMsg.style.display = 'none';
                errorMsg.textContent = error.message;
                errorMsg.style.display = 'block';
            }
        });

        function clearResults() {
            document.getElementById('searchResults').style.display = 'none';
            document.getElementById('errorMessage').style.display = 'none';
        }
    </script>
</body>
</html>
